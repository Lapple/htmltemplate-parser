#!/usr/bin/env node

var fs = require('fs');
var inspect = require('util').inspect;

var parser = require('..');

var argv = require('yargs')
    .usage('Usage: $0 [options]')
    .options({
        'path': {
            demand: true,
            describe: 'file to parse',
            type: 'string'
        },
        'pretty': {
            describe: 'output with colors',
            type: 'boolean'
        },
        'ignore-html': {
            describe: 'treat HTML tags as text',
            type: 'boolean'
        }
    })
    .argv;

var template = fs.readFileSync(argv.path, 'utf8').trim();

var ast = parser.parse(template, {
    ignoreHTMLTags: argv.ignoreHtml
});

if (argv.pretty) {
    console.log(inspect(ast, { colors: true, depth: Infinity }));
} else {
    console.log(JSON.stringify(ast, null, 4));
}
